# next.js open tutorials notes

# next.js란?

react 기능들을 기반으로 한 풀스택 웹 애플리케이션 프레임워크

- FE -> react
- BE -> expressjs 유사 시스템 기본 탑재

장점
- server-side rendering(SSR) 지원
  - client-side rendering: react와 같은 js 기반의 애플리케이션은 js로 동작하기에, js를 다운로드 한 후 브라우저에서 js가 실행되어야 화면에 ui가 표시 -> js가 동작하지 않는 환경에서는 화면이 표시되지 않기 때문에 검색엔진과 같은 로봇들이 컨텐츠를 이용할 수 없다는 치명적 단점 + js를 다운로드하고 실행하기 전까지는 화면이 표시 불가 문제
  - SSR은 서버 쪽에서 js 쪽에서 js가 실행, 브라우저로 완성된 html 전송 -> js를 실행할 수 없는 환경에서도 동작, 검색엔진 친화적 + 다운로드 받는 즉시 표시되기에 사용자 입장에서도 빠른 속도의 웹페이지 느낌 경험

기타
- app router: nextjs 13 버전부터 적용된 새로운 매커니즘 -> 'server component'라는 새로운 react 기능 활용
- 필요 react 선수지식: component, state, props, useEffect






</br></br></br>

# 설치와 실행

설치
- node.js 설치(홈페이지 다운로드)
- 폴더 생성 -> IDE에서 폴더 오픈 -> 터미널
  `npx create-next-app@latest .`(npx: 노드로 만들어진 프로그램을 설치 없이 바로 실행 가능)
    - `src/` directory? -> yes
    - App Router? -> yes(nextjs 13 버전부터 도입, 큰 변화. nextjs 13버전 이전에는 Page Router라는 걸 사용.)
    - import alias -> no
    - (nextjs가 설치 안되어 있는 컴퓨터는 이 과정을 꼭 한 번 실행해야 제대로 설치가 된다. 아래 커맨드는 실행해도 설치는 된 것으로 보이지만 npm run start 등의 커맨드를 찾지 못하는 문제가 발생한다.)
      - `npm install -g create-next-app` 혹은 `sudo npm install -g create-next-app`
- `npm run dev`(`npm run start`는 `create-react-app`에서 사용)


기타





</br></br></br>

# 샘플앱 세탁

- `layout.js` - 기본적인 웹페이지 골격 구성


```js
// layout.js
import "./globals.css";

export const metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        {children}
      </body>
    </html>
  );
}

```

`children`의 내용은 `page.js`에서 가져온다.

```js
// page.js
export default function Home() {
  return (
    <>
      hello, nextjs!
    </>
  );
}
```

`global.css` 내용 전부 삭제 초기화






</br></br></br>

# 배포

`npm run dev` 시...
- 실서버에 최적화된 버전이 필요
  - chrome 개발자도구 -> network -> 맨 밑 보면 '6.9MB resources' 라고 나온다. -> 서버에서 클라이언트로 전송한 용량. 큰 용량. -> 줄이는 게 바람직
  - 추가로 chrome 개발자도구 console창 보면 개발을 위해 필요한 여러 정보들이 출력이 된다(초기에는 없지만) -> 배포시 비효율적이고, 보안상 문제 가능성 -> 없는 게 바람직
- `package.json`: nodejs 기반 프로젝트들은 "scripts" 하위에 프로젝트 유지보수를 위한 명령어들 목록
  - `"dev": next dev` - `npm run dev` 시 "next dev"라는 명령어 실행
  - `"build: "next build"` - 실서버를 위한 배포판을 만드는 명령
    - 패키지에 `.next` 폴더 및 소스 생성 -> 개발을 하건, 실서버를 빌드하건, 사용자들에게 서비스되는 내용이 저장된다.
  - `"start": "next start` - 그 배포판을 서비스하는 명령
    - `npm run build`(배포판 빌드) -> `npm run start`(배포판 실행) -> `.next` 패키지에 있는 내용이 서비스되기 시작
- build 후 배포판 서버 실행시 chrome 개발자도구 network에서 '376 kb resources'라고 나오는 걸 확인할 수 있다(6.9MB -> 376 kb, 약 20배 용량 감소).





```js
```







</br></br></br>

# 


```js
```







</br></br></br>

# 


```js
```




chrome dev → menu(…) → run command → ‘disable javascript’ 선택 → 그래도 페이지는 전달 되는 걸 확인할 수 있다.
되돌릴 땐 ‘enable javascript’

chrome dev → network → ‘not throttling’을 ‘3G’ 등으로 바꿔 일부러 네트워크 지연현상을 만들 수 있다.

페이지 reload마다 페이지 전체 새로 로드하는 부분 개선(대역폭 줄여 비용 낮추고 속도도 개선 가능)
```react
import Link from ‘next/link’

<a href=...></a> # 이걸
<Link href=…></Link> # 로 변경
```


npx json-server --port 9999 --watch db.json
(db.json 생성 안되고 서버 실행 안될시 아래로 실행)
npx json-server@0.17.4 --port 9999 --watch db.json


</br></br></br>

# 


```js
```







</br></br></br>

# 


```js
```







</br></br></br>

# 


```js
```







</br></br></br>

# 


```js
```







</br></br></br>

# 


```js
```







</br></br></br>

# 


```js
```







</br></br></br>

# 


```js
```







</br></br></br>

# 


```js
```







</br></br></br>

